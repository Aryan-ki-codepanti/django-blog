{% extends 'base.html' %}

{% block title %}
    BlogHome | iCoder
{% endblock title %}
{% block blog %} active {% endblock blog %}


{% block content %}
<div class="container">
    <h2 class="my-5">Coding articles with iCoder</h2>

    {% for post in posts %}
        <div
            class="
                my-5
                row
                g-0
                border
                rounded
                overflow-hidden
                flex-md-row
                shadow-sm
                h-md-250
                position-relative
            "
        >
            <div class="col p-4 d-flex flex-column position-static">
                <strong class="d-inline-block mb-2 text-primary">By {{ post.author|capfirst }} ({{ post.view_count }} views) </strong>
                <h3 class="mb-0"><a class="text-dark text-decoration-none" href="{% url 'BlogPost' post.slug %}">{{ post.title }} </a> </h3>
                <div class="mb-1 text-muted">
                    {{ post.timeStamp }}
                </div>
                <p class="card-text mb-auto">
                    <div class="preview">
                        {{ post.content|safe|truncatechars:500 }}
                    </div>
                </p>
                <div class="mt-3">
                    <a href="{% url 'BlogPost' post.slug %}" class="btn btn-info" role="button">Continue reading</a>
                </div> 
            </div>
        </div>
    {% endfor %}
</div>

{% block js %}
<script>
    const previews = document.getElementsByClassName('preview');
    Array.from(previews).forEach(node => node.innerHTML = node.innerText);
</script>
{% endblock js %}

{% endblock content %}